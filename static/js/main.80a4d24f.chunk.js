(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{31:function(e,t,s){},32:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=s(18),c=s.n(r),o=s(2),l=s(11),u=s(4),i=s(3),b=s.n(i),d=s(5),j=s(0);var x=function(e){var t=e.text,s=e.success,a=s?"bg-green-100":"bg-red-100",n=s?"text-green-900":"text-red-900";return Object(j.jsx)("div",{className:"p-5 w-full ".concat(a," rounded mb-10 wobble"),children:Object(j.jsx)("h1",{className:"".concat(n," text-sm text-center"),children:t})})};var p=function(){return Object(j.jsxs)("div",{className:"lds-ring",children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]})},h={login:function(){var e=Object(d.a)(b.a.mark((function e(t,s){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://odingblogapi.herokuapp.com/api/me/login",{method:"POST",body:JSON.stringify({username:t,password:s}),headers:{"Content-type":"application/json; charset=UTF-8"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),getMyPosts:function(){var e=Object(d.a)(b.a.mark((function e(){var t,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://odingblogapi.herokuapp.com/api/me/posts",{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});case 2:return t=e.sent,e.next=5,t.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createPost:function(){var e=Object(d.a)(b.a.mark((function e(t,s){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://odingblogapi.herokuapp.com/api/posts",{method:"POST",body:JSON.stringify({title:t,body:s,published:!0}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),deletePost:function(){var e=Object(d.a)(b.a.mark((function e(t){var s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://odingblogapi.herokuapp.com/api/posts/".concat(t),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});case 2:return s=e.sent,e.next=5,s.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editPost:function(){var e=Object(d.a)(b.a.mark((function e(t,s){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://odingblogapi.herokuapp.com/api/posts/".concat(t),{method:"PUT",body:JSON.stringify({title:s.title,body:s.body,published:!0}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),deleteComment:function(){var e=Object(d.a)(b.a.mark((function e(t){var s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://odingblogapi.herokuapp.com/api/comments/".concat(t),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});case 2:return s=e.sent,e.next=5,s.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(e,t){"Enter"===e.key&&t()};var f=function(e){var t=Object(a.useState)(""),s=Object(o.a)(t,2),n=s[0],r=s[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),u=l[0],i=l[1],f=Object(a.useState)(""),g=Object(o.a)(f,2),O=g[0],v=g[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),k=w[0],N=w[1],S=function(){var t=Object(d.a)(b.a.mark((function t(){var s,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v(""),!n||!u){t.next=9;break}return N(!0),t.next=5,h.login(n,u);case 5:"failure"===(s=t.sent).status?(N(!1),v("Sorry, please enter valid login information!")):(a=s.data.token,e.setToken(a)),t.next=10;break;case 9:v("Sorry, you must fill out both fields first!");case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"w-full h-screen bg-blue-400",children:Object(j.jsxs)("div",{className:"login-form max-w-sm w-11/12",children:[Object(j.jsxs)("div",{className:"p-5 w-full bg-yellow-100 rounded mb-10 wobble",children:[Object(j.jsx)("h1",{className:"text-yellow-900 text-sm mb-3",children:"You can test this app with the guest account"}),Object(j.jsxs)("p",{className:"text-yellow-900 text-sm",children:["Username:",Object(j.jsx)("span",{className:" text-yellow-900 font-bold text-lg",children:" Guest"})]}),Object(j.jsxs)("p",{className:"text-yellow-900 text-sm",children:["Password:",Object(j.jsxs)("span",{className:" text-yellow-900 font-bold text-lg",children:[" ","password"]})]})]}),O&&Object(j.jsx)(x,{text:O,success:!1}),Object(j.jsxs)("div",{className:"inline-block p-10 w-full shadow-lg rounded bg-white ",children:[k?Object(j.jsx)(p,{}):Object(j.jsx)("h1",{className:"text-center text-blue-500 text-5xl mb-5",children:Object(j.jsx)("i",{className:"fas fa-lock"})}),Object(j.jsx)("input",{type:"text",placeholder:"Username",value:n,onKeyPress:function(e){return m(e,S)},onChange:function(e){return r(e.currentTarget.value)},className:"p-3 bg-gray-100 block rounded w-full mb-5 text-gray-900 placeholder-gray-600"}),Object(j.jsx)("input",{type:"password",placeholder:"Password",value:u,onKeyPress:function(e){return m(e,S)},onChange:function(e){return i(e.currentTarget.value)},className:"p-3 bg-gray-100 block rounded w-full mb-5 text-gray-900 placeholder-gray-600"}),Object(j.jsx)("button",{onClick:S,className:"".concat(k?"bg-blue-200 cursor-default ":"bg-blue-500 hover:bg-blue-600","  transition duration-200 font-bold p-3 rounded w-full text-white"),disabled:k,children:"Login"})]})]})})};var g=function(e){var t=e.post,s=e.postTitle,r=e.postBody,c=e.setPostTitle,l=e.setPostBody,u=e.toggleMode,i=Object(a.useState)(s),f=Object(o.a)(i,2),g=f[0],O=f[1],v=Object(a.useState)(r),y=Object(o.a)(v,2),w=y[0],k=y[1],N=Object(a.useState)(!1),S=Object(o.a)(N,2),T=S[0],C=S[1],P=Object(a.useState)({message:null,success:null}),B=Object(o.a)(P,2),U=B[0],D=B[1],F=function(){D({message:null,success:null})},E=function(){var e=Object(d.a)(b.a.mark((function e(){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(),C(!0),e.next=4,h.editPost(t._id,{title:g,body:w});case 4:s=e.sent,C(!1),"failure"===s.status?D({message:"Sorry, there was a problem updating your post!",success:!1}):(c(g),l(w),D({message:"You have succesfully edited your post!",success:!0}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)(n.a.Fragment,{children:[U.message&&Object(j.jsx)(x,{text:U.message,success:U.success}),T&&Object(j.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(j.jsx)(p,{})}),Object(j.jsx)("input",{type:"text",placeholder:"Title",onKeyPress:function(e){return m(e,E)},onChange:function(e){O(e.currentTarget.value)},value:g,className:"text-md font-bold mb-3 p-3 rounded w-full"}),Object(j.jsx)("textarea",{placeholder:"Title",onChange:function(e){k(e.currentTarget.value)},value:w,className:"text-gray-400 p-3 rounded w-full resize-none h-64"}),Object(j.jsxs)("div",{className:"mt-3",children:[Object(j.jsx)("button",{disabled:T,onClick:function(){F(),u()},className:"hover:cursor-pointer mr-3 px-4 py-2 border text-gray-500 border-gray-200 rounded hover:bg-blue-100 transition duration-200",children:"Cancel"}),Object(j.jsx)("button",{disabled:T,onClick:E,className:"".concat(T?"bg-gray-100 text-gray-400 cursor-default":"text-green-900 bg-green-100 hover:bg-green-200 transition duration-200"," px-4 py-2 rounded font-bold inline-block shadow"),children:"Save"})]})]})};var O=function(e){var t=e.post,s=e.postTitle,a=e.postBody,r=e.toggleMode,c=e.showDeletePopUp;return Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://abojo.github.io/BlogClient/posts/".concat(t._id),className:"text-2xl font-bold mb-3 hover:opacity-60 transition duration-200",children:[s,Object(j.jsx)("i",{className:"text-lg text-blue-500 ml-3 fas fa-external-link-alt"})]}),Object(j.jsx)("p",{className:"text-gray-400 break-words\t",children:"".concat(a.length>200?a.slice(0,200):a,"...")}),Object(j.jsxs)("div",{className:"mt-3",children:[Object(j.jsx)("button",{onClick:r,className:"text-yellow-900 bg-yellow-100 hover:bg-yellow-200 transition duration-200 px-4 py-2 rounded font-bold inline-block shadow",children:"Edit"}),Object(j.jsx)("button",{onClick:function(){return c(t._id,t.title)},className:"hover:cursor-pointer ml-3 px-4 py-2 border text-gray-500 border-gray-200 rounded hover:bg-blue-100 transition duration-200",children:"Delete"})]})]})},v=function(e){var t=new Date(e);return"".concat(t.getMonth()+1,"/").concat(t.getDate(),"/").concat(t.getFullYear())};var y=function(e){var t=e.comment,s=e.removeComment,r=e.setPopUp,c=Object(a.useState)(!1),l=Object(o.a)(c,2),u=l[0],i=l[1],x=Object(a.useState)(!1),m=Object(o.a)(x,2),f=m[0],g=m[1],O=function(){i(!u)},y=function(){var e=Object(d.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({message:null,status:null}),g(!0),e.next=4,h.deleteComment(t._id);case 4:a=e.sent,g(!1),"failure"===a.status?(r({message:"Sorry, there was a problem deleting the comment!",success:!0}),O()):(s(t._id),r({message:"You have succesfully removed the comment!",success:!0}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsx)("h1",{className:"font-bold text-sm mb-1",children:t.name}),Object(j.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:v(t.timestamp)}),Object(j.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:t.body}),Object(j.jsx)("button",{onClick:O,className:"text-red-500 hover:text-red-800 transition duration-200 font-bold text-sm",children:"Delete"})]}),k=Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsx)("h1",{className:"mb-3 font-bold",children:"Are you sure you want to delete this comment?"}),Object(j.jsx)("button",{onClick:O,className:"hover:cursor-pointer mr-3 p-2 border text-gray-500 border-gray-200 rounded hover:bg-gray-100 transition duration-200 text-sm",children:"Close"}),Object(j.jsx)("button",{onClick:y,className:"p-2 font-bold rounded shadow bg-red-100 text-red-900 hover:bg-red-200 transition duration-200 text-sm",children:"Delete"})]});return Object(j.jsxs)("div",{className:"mb-3 border-t border-gray-300 pt-3",children:[f&&Object(j.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(j.jsx)(p,{})}),u?k:w]})};var w=function(e){var t=e.comments,s=e.hideManager,n=e.removeComment,r=Object(a.useState)({message:null,success:null}),c=Object(o.a)(r,2),l=c[0],u=c[1];return Object(j.jsx)("div",{className:"fixed h-screen w-screen bg-opacity-40 bg-black top-0 left-0 z-10",children:Object(j.jsxs)("div",{className:"rounded p-6 max-w-xl w-11/12 bg-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[l.message&&Object(j.jsx)(x,{text:l.message,success:l.success}),Object(j.jsx)("button",{className:"mb-3",onClick:s,children:Object(j.jsx)("i",{className:"fas fa-arrow-left text-blue-500 text-2xl"})}),Object(j.jsxs)("h1",{className:"font-bold text-md mb-3",children:["Comments (",t.length,")"]}),Object(j.jsx)("div",{className:"overflow-y-auto max-h-96",children:t.map((function(e){return Object(j.jsx)(y,{removeComment:n,comment:e,setPopUp:u},e._id)})).reverse()})]})})};var k=function(e){var t=e.post,s=e.showDeletePopUp,n=Object(a.useState)(!1),r=Object(o.a)(n,2),c=r[0],l=r[1],u=Object(a.useState)(t.title),i=Object(o.a)(u,2),b=i[0],d=i[1],x=Object(a.useState)(t.body),p=Object(o.a)(x,2),h=p[0],m=p[1],f=Object(a.useState)(t.comments),v=Object(o.a)(f,2),y=v[0],k=v[1],N=Object(a.useState)(!1),S=Object(o.a)(N,2),T=S[0],C=S[1],P=function(){l(!c)},B=function(){C(!T)};return Object(j.jsxs)("div",{className:"mb-10 p-8 bg-blue-50 rounded relative shadow-md",children:[T&&Object(j.jsx)(w,{comments:y,hideManager:B,removeComment:function(e){k(y.filter((function(t){return t._id!==e})))}}),Object(j.jsx)("div",{className:"bg-white inline-block p-3 rounded-full shadow-md text-md absolute bubble",children:Object(j.jsxs)("h1",{className:"text-blue-500",children:[Object(j.jsx)("i",{className:"fas fa-comment mr-1"}),y.length,Object(j.jsx)("i",{class:"ml-2 fas fa-external-link-alt text-blue-200 text-sm hover:text-blue-400 transition duration-200 cursor-pointer",onClick:B})]})}),c?Object(j.jsx)(g,{post:t,postTitle:b,postBody:h,setPostTitle:d,setPostBody:m,toggleMode:P}):Object(j.jsx)(O,{post:t,postTitle:b,postBody:h,toggleMode:P,showDeletePopUp:s})]})};var N=function(e){var t=e.id,s=e.title,n=e.hidePopUp,r=e.posts,c=e.setPosts,l=Object(a.useState)(!1),u=Object(o.a)(l,2),i=u[0],m=u[1],f=Object(a.useState)({message:null,success:null}),g=Object(o.a)(f,2),O=g[0],v=g[1],y=function(){var e=Object(d.a)(b.a.mark((function e(){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,h.deletePost(t);case 3:s=e.sent,m(!1),"failure"===s.status?v({message:"Sorry, there was a problem deleting your post!",success:!1}):(c(r.filter((function(e){return e._id!==t}))),v({message:"Your post has been deleted!",success:!0}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"fixed h-screen w-screen bg-opacity-40 bg-black top-0 left-0 z-10",children:Object(j.jsxs)("div",{className:"rounded p-5 max-w-3xl w-11/12 bg-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[i&&Object(j.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:Object(j.jsx)(p,{})}),O.message?Object(j.jsx)(x,{text:O.message,success:O.success}):Object(j.jsxs)("h1",{className:"text-xl mb-5 border-gray-200 border-b pb-5",children:["Are you sure you want to delete ",s,"?"]}),Object(j.jsxs)("div",{className:"ml-auto block w-max\t",children:[Object(j.jsx)("button",{onClick:n,className:"hover:cursor-pointer mr-3 p-3 border text-gray-500 border-gray-200 rounded hover:bg-gray-100 transition duration-200",children:"Close"}),Object(j.jsx)("button",{onClick:y,className:"".concat(O.success?"bg-gray-100 text-gray-400 cursor-default":"bg-red-100 text-red-900 hover:bg-red-200 transition duration-200"," p-3 font-bold rounded shadow"),disabled:O.success,children:"Delete"})]})]})})};var S=function(e){var t=Object(a.useState)(""),s=Object(o.a)(t,2),n=s[0],r=s[1],c=Object(a.useState)(!1),l=Object(o.a)(c,2),u=l[0],i=l[1],x=Object(a.useState)({show:!1,id:null,title:null}),m=Object(o.a)(x,2),f=m[0],g=m[1],O=function(e,t){g({show:!0,id:e,title:t})};return Object(a.useEffect)((function(){Object(d.a)(b.a.mark((function t(){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,h.getMyPosts();case 3:s=t.sent,i(!1),"Sorry, please login again!"===s.data.message?e.setToken(""):r(s.data.posts);case 6:case"end":return t.stop()}}),t)})))()}),[e]),Object(j.jsxs)("div",{className:"px-5 max-w-3xl w-11/12 mx-auto ",children:[f.show&&Object(j.jsx)(N,{id:f.id,title:f.title,hidePopUp:function(){g({show:!1,id:null,title:null})},posts:n,setPosts:r}),u&&Object(j.jsx)(p,{}),n&&!n.length&&Object(j.jsx)("h1",{className:"text-center text-3xl font-bold",children:"You have no posts!"}),n&&n.map((function(e){return Object(j.jsx)(k,{post:e,showDeletePopUp:O},e._id)})).reverse()]})};var T=function(e){var t="font-bold text-blue-500 pb-1 border-blue-500 border-b-2",s="hover:text-blue-400 transition duration-200";return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"bg-blue-500 px-5 py-3 flex justify-between items-baseline mb-10",children:[Object(j.jsx)(l.b,{className:"text-xl font-bold text-white",to:"/",children:"Blog Admin"}),Object(j.jsx)("button",{onClick:function(){e.setToken("")},className:"bg-white hover:bg-blue-100 transition duration-200 rounded text-white p-2 text-md text-blue-500 font-bold",children:"Logout"})]}),Object(j.jsxs)("div",{className:"text-lg text-gray-500 mb-10 block text-center",children:[Object(j.jsx)(l.c,{exact:!0,to:"/",className:"".concat(s," mr-12"),activeClassName:t,children:"My Posts"}),Object(j.jsx)(l.c,{exact:!0,to:"/create",className:s,activeClassName:t,children:"Create Post"})]})]})};var C=function(e){var t=e.postTitle,s=e.setPostTitle,n=e.postBody,r=e.setPostBody,c=Object(a.useState)(""),l=Object(o.a)(c,2),u=l[0],i=l[1],f=Object(a.useState)(!1),g=Object(o.a)(f,2),O=g[0],v=g[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),k=w[0],N=w[1],S=function(e,t){i(e),v(t)},T=function(){var e=Object(d.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=9;break}return N(!0),e.next=4,h.createPost(t,n);case 4:a=e.sent,N(!1),"failure"===a.status?S("Sorry, there was a problem creating your post!",!1):(S("Your post was successfully created!",!0),s(""),r("")),e.next=10;break;case 9:S("Sorry, you must fill out both fields!",!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"px-5 max-w-3xl w-11/12 mx-auto ",children:[k&&Object(j.jsx)(p,{}),u&&Object(j.jsx)(x,{text:u,success:O}),Object(j.jsx)("input",{placeholder:"Title",className:"p-4 bg-gray-100 block rounded w-full mb-5 text-gray-900 placeholder-gray-600 shadow",value:t,onKeyPress:function(e){return m(e,T)},onChange:function(e){s(e.currentTarget.value)}}),Object(j.jsx)("textarea",{placeholder:"Body",className:"p-4 bg-gray-100 block rounded w-full mb-5 text-gray-900 placeholder-gray-600 resize-none h-64 shadow",value:n,onChange:function(e){r(e.currentTarget.value)}}),Object(j.jsx)("button",{className:"".concat(k?"bg-gray-100 text-gray-300 cursor-default":"bg-green-100 text-green-900 hover:bg-green-200"," w-full p-4 font-bold rounded text-xl transition duration-200 shadow"),onClick:T,disabled:k,children:"Create Post"})]})};var P=function(){var e=Object(a.useState)(localStorage.getItem("authToken")),t=Object(o.a)(e,2),s=t[0],n=t[1];return{token:s,setToken:function(e){localStorage.setItem("authToken",e),n(e)}}};var B=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),s=t[0],r=t[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),b=i[0],d=i[1],x=P(),p=x.token,h=x.setToken;return p?Object(j.jsx)(n.a.Fragment,{children:Object(j.jsxs)(l.a,{basename:"/BlogAdmin",children:[Object(j.jsx)(T,{setToken:h}),Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{exact:!0,path:"/",children:Object(j.jsx)(S,{setToken:h})}),Object(j.jsx)(u.a,{exact:!0,path:"/create",children:Object(j.jsx)(C,{postTitle:s,setPostTitle:r,postBody:b,setPostBody:d})})]})]})}):Object(j.jsx)(f,{setToken:h})};s(31);c.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(B,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.80a4d24f.chunk.js.map